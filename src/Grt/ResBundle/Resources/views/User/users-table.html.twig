{% if users is defined %}
    <table class="table table-striped table-hover">
        {% block table_header %}
            <thead>
            <tr>
                <th>#</th>
                <th>{% trans %}Last Name{% endtrans %}
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'lastname', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'lastname', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'),'page': 1, 'field': 'lastname', 'order': 'DESC'}) }}">
                                <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'lastname', 'order': 'DESC'}) }}">
                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                </th>
                <th>{% trans %}First Name{% endtrans %}
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'firstname', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'firstname', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'firstname', 'order': 'DESC'}) }}">
                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'firstname', 'order': 'DESC'}) }}">
                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                </th>
                <th>{% trans %}Middle Name{% endtrans %}
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'middlename', 'order': 'ASC'}) }}">
                                <i class="fa fa-chevron-up" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'middlename', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'middlename', 'order': 'DESC'}) }}">
                                <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'middlename', 'order': 'DESC'}) }}">
                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                </th>
                <th>Отдел
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'department', 'order': 'ASC'}) }}">
                                <i class="fa fa-chevron-up" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'department', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'department', 'order': 'DESC'}) }}">
                                <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'department', 'order': 'DESC'}) }}">
                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                </th>
                <th>
                    ПТО
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'location', 'order': 'ASC'}) }}">
                                <i class="fa fa-chevron-up" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'location', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-up" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                    <span>
                            {% if app.request.get('departmentId') or app.request.get('locationId')  %}
                                <a href="{{ path(app.request.attributes.get('_route'), {'departmentId': app.request.get('departmentId'),'locationId': app.request.get('locationId'), 'page': 1, 'field': 'location', 'order': 'DESC'}) }}">
                                <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            {% else %}
                                <a href="{{ path('grt_users', { 'page': 1, 'field': 'location', 'order': 'ASC'}) }}">
                                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </span>
                </th>
                {% if is_granted('ROLE_ADMIN') %}
                    <th colspan="4">
                {% else %}
                    <th colspan="3">
                {% endif %}
                    {% trans %}Action{% endtrans %}
                </th>
            </tr>
            </thead>
        {% endblock %}
        {% block table_body %}
            <tbody>
            {% for user in users %}
                {% if user.active %}
                <tr>
                {% else %}
                <tr style="background-color: #ebccd1 !important;">
                {% endif %}
                    {% if maxPages > 1 %}
                        <td scope="row">{{ loop.index + (thisPage-1)*50}}</td>
                    {% else %}
                        <td scope="row">{{ loop.index }}</td>
                    {% endif %}
                    <td>{{ user.lastname }}</td>
                    <td>{{ user.firstname }}</td>
                    <td>{{ user.middlename }}</td>
                    <td>{{ user.department }}</td>
                    <td>{{ user.location }}</td>
                    <td>
                        <a href="{{ path('grt_user_show', { 'userId': user.id}) }}" title="{% trans %}Show user info{% endtrans %}">
                            <i class="far fa-eye"></i>
                        </a>
                    </td>
                    <td>
                        <a href="{{ path('grt_edit_user', { 'userId': user.id }) }}" title="{% trans %}Edit user{% endtrans %}">
                            <i class="fas fa-user-edit"></i>
                        </a>
                    </td>

                    <td>
                        {% if user.active %}
                            <a href="{{ path('grt_deactivate_user', { 'userId': user.id, 'activity': 'false' }) }}" onclick="return preDelete()" title="{% trans %}Deactivate user{% endtrans %}">
                                <i class="fas fa-user-slash"></i>
                            </a>
                        {% else %}
                            <a href="{{ path('grt_deactivate_user', { 'userId': user.id, 'activity': 'true' }) }}" onclick="return preDelete()" title="{% trans %}Activate user{% endtrans %}">
                                <i class="fas fa-user-check"></i>
                            </a>
                        {% endif %}

                    </td>

                    {% if is_granted('ROLE_ADMIN') %}
                    <td>
                        <a href="{{ path('grt_delete_user', { 'userId': user.id }) }}" onclick="return preDelete()" title="{% trans %}Delete user{% endtrans %}">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </a>
                    </td>
                    {% endif %}
                </tr>
            {% endfor %}
            </tbody>
        {% endblock %}
    </table>
{% else %}
     <p>{% trans %}There are no users{% endtrans %}</p>
{% endif %}